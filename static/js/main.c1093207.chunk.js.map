{"version":3,"sources":["store/actions.js","components/LoginForm/index.js","components/Main/index.js","components/UserProfile/index.js","components/NotFound/index.js","store/userReducer.js","store/jokeReducer.js","store/authReducer.js","store/rootReducer.js","store/index.js","routes.js","App.js","reportWebVitals.js","index.js"],"names":["checkLoginPass","login","password","Promise","resolve","reject","setTimeout","LoginForm","props","console","log","React","useState","setLogin","setPassword","handleSubmit","e","a","preventDefault","setEmail","componentUnmount","pageRefresh","setIsChecked","alert","window","location","reload","onSubmit","type","value","onChange","target","connect","dispatch","bindActionCreators","payload","memo","Main","updateJoke","fetchJoke","useEffect","onClick","jokeText","state","joke","text","chainDispatch","fetch","headers","accept","then","r","json","data","UserProfile","updateUser","fetchUser","firstName","lastName","user","name","familyName","url","NotFound","initialState","id","email","authReducer","action","combineReducers","results","first","last","auth","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","rootReducer","applyMiddleware","thunk","LOGIN","MAIN","PROFILE","NOT_FOUND","App","isChecked","CustomRouteDefault","from","routes","exact","to","CustomRoute","className","path","render","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c1093207.chunk.js","sourcesContent":["export const fetchJoke = (chainDispatch) => () => {\r\n  setTimeout(() => {\r\n    fetch(\"https://icanhazdadjoke.com\", {\r\n      headers: {\r\n        accept: \"application/json\",\r\n      },\r\n    })\r\n      .then((r) => r.json())\r\n      .then((data) => {\r\n        chainDispatch((dispatch) =>\r\n          dispatch({ type: \"SET_JOKE\", payload: data })\r\n        )\r\n      })\r\n  }, 3000)\r\n}\r\n\r\nexport const fetchUser = (chainDispatch) => () => {\r\n  setTimeout(() => {\r\n    fetch(\"https://randomuser.me/api/\", {\r\n      headers: {\r\n        url: \"https://randomuser.me/api/\",\r\n        accept: \"application/json\",\r\n      },\r\n    })\r\n      .then((r) => r.json())\r\n    .then((data) => {\r\n      chainDispatch((dispatch) =>\r\n        dispatch({ type: \"SET_USER\", payload: data })\r\n      )\r\n    })\r\n  }, 3000)\r\n}\r\n\r\nexport const checkLoginPass = (login, password) => {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => {\r\n      login === \"admin\" && password === \"123\" ? resolve(\"ok\") : reject(\"wrong\")\r\n    }, 3000)\r\n  })\r\n}\r\n","import React from \"react\"\r\nimport { connect } from \"react-redux\"\r\nimport { bindActionCreators } from \"redux\"\r\nimport { checkLoginPass } from \"../../store/actions\"\r\n\r\nconst mapDispatchToProps = (dispatch) =>\r\n  bindActionCreators(\r\n    { setEmail: (payload) => ({ type: \"LOGIN_SUCCESS\", payload }) },\r\n    dispatch\r\n  )\r\n\r\nconst LoginForm = (props) => {\r\n  console.log(\"LoginForm -> props\", props)\r\n\r\n  const [login, setLogin] = React.useState(\"\")\r\n  const [password, setPassword] = React.useState(\"\")\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault() // нужно, чтобы анулировать умолчательное поведение\r\n    // браузера при отправке формы, которая перезагружает страницу. Если\r\n    // это произойдет, то мы потеряем данные и нечего будет отправлять\r\n    // на сервер...\r\n    // Далее по коду должен идти запрос на сервер для проверки введенного\r\n    // логина и пароля. Вместо него вызываем функцию, имитирующую запрос...\r\n    try {\r\n      await checkLoginPass(login, password)\r\n      props.setEmail(login)\r\n      componentUnmount()\r\n    } catch (e) {\r\n      pageRefresh(e)\r\n    }\r\n  }\r\n\r\n  const componentUnmount = () => {\r\n    props.setIsChecked(true)\r\n  }\r\n\r\n  const pageRefresh = (e) => {\r\n    alert(`Check your credentials. Your input is ${e}.`)\r\n    window.location.reload()\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <button type=\"submit\">Submit</button>\r\n      <input value={login} onChange={(e) => setLogin(e.target.value)} />\r\n      <input value={password} onChange={(e) => setPassword(e.target.value)} type=\"password\" />\r\n    </form>\r\n  )\r\n}\r\n\r\n//если в компоненте нет состояния и нужно только менять значение, то\r\n// вместо mapStateToProps в коннект передается null, а сама функция\r\n// mapStateToProps в компоненте не создается.\r\nexport default connect(null, mapDispatchToProps)(React.memo(LoginForm))\r\n","import React from \"react\"\r\nimport { connect } from \"react-redux\"\r\nimport { fetchJoke } from \"../../store/actions\"\r\n\r\nconst mapStateToProps = (state) => ({\r\n  jokeText: state.joke.text,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  fetchJoke: fetchJoke(dispatch),\r\n})\r\n\r\nconst Main = (props) => {\r\n  // console.log(\"Joke -> props\", props);\r\n\r\n  const updateJoke = () => {\r\n    props.fetchJoke()\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    updateJoke()\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  return (\r\n    <div>\r\n      <p onClick={() => updateJoke()}>Joke: {props.jokeText}</p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(React.memo(Main))\r\n","import React from \"react\"\r\nimport { connect } from \"react-redux\"\r\nimport { fetchUser } from \"../../store/actions\"\r\n\r\nconst mapStateToProps = (state) => ({\r\n  firstName: state.user.name,\r\n  lastName: state.user.familyName,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  fetchUser: fetchUser(dispatch),\r\n})\r\n\r\nconst UserProfile = (props) => {\r\n  const updateUser = () => {\r\n    props.fetchUser()\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    updateUser()\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  return (\r\n    <div>\r\n      <p onClick={() => updateUser()}>\r\n        User: <span>{props.firstName}</span> <span>{props.lastName}</span>\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo(UserProfile))\r\n","import React from 'react'\r\n\r\nconst NotFound = () => {\r\n    return (\r\n        <p>404</p>\r\n    )\r\n}\r\n\r\n\r\nexport default React.memo(NotFound)","const initialState = {\r\n  name: \"\",\r\n  familyName: \"\",\r\n}\r\n\r\nexport default function JokeReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case \"SET_USER\":\r\n      return {\r\n        ...state,\r\n        name: action.payload.results[0].name.first,\r\n        familyName: action.payload.results[0].name.last,\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","const initialState = {\r\n  id: \"\",\r\n  text: \"\",\r\n}\r\n\r\nexport default function JokeReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case \"SET_JOKE\":\r\n      return {\r\n        ...state,\r\n        id: action.payload.id,\r\n        text: action.payload.joke,\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","const initialState = {\r\n    email: '',\r\n  }\r\n  \r\n  const authReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n      case \"LOGIN_SUCCESS\":\r\n        return { ...state, email: action.payload }\r\n      \r\n      default:\r\n        return state\r\n    }\r\n  }\r\n  \r\n  export default authReducer","import { combineReducers } from \"redux\";\r\nimport userReducer from \"./userReducer\"\r\nimport jokeReducer from \"./jokeReducer\"\r\nimport authReducer from \"./authReducer\";\r\n\r\nexport default combineReducers({\r\n    user: userReducer,\r\n    joke: jokeReducer,\r\n    auth: authReducer,\r\n  });","import {createStore, applyMiddleware, compose} from \"redux\"\r\nimport thunk from \"redux-thunk\"\r\nimport rootReducer from \"./rootReducer\"\r\n\r\n// -- this fragment for redux-devtools-extension(FireFox) --\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\nconst store = createStore(\r\n  rootReducer,\r\n  /* preloadedState, */ composeEnhancers(applyMiddleware(thunk))\r\n)\r\n\r\nexport default store","export const LOGIN = \"/login\"\r\nexport const MAIN = \"/main\"\r\nexport const PROFILE = \"/user\"\r\nexport const NOT_FOUND = \"/404\"\r\n","import React from \"react\"\nimport { BrowserRouter, Route, Redirect, Switch, Link } from \"react-router-dom\"\nimport \"./App.css\"\nimport LoginForm from \"./components/LoginForm\"\nimport Main from \"./components/Main\"\nimport UserProfile from \"./components/UserProfile\"\nimport NotFound from \"./components/NotFound\"\n\nimport store from \"./store\"\nimport * as routes from \"./routes\"\nimport { Provider } from \"react-redux\"\n\nfunction App() {\n  const [isChecked, setIsChecked] = React.useState(false)\n\n  const CustomRouteDefault = (props) => {\n    if (!isChecked) {\n      return <Route {...props} />\n    }\n    return <Redirect from={routes.LOGIN} exact to={routes.MAIN} />\n  }\n\n  const CustomRoute = (props) => {\n    if (isChecked) {\n      return <Route {...props} />\n    }\n    return <Redirect from=\"/\" exact to={routes.LOGIN} />\n  }\n\n  return (\n    <div className=\"App\">\n      <Provider store={store}>\n        <BrowserRouter>\n          {isChecked && (\n            <nav>\n              <Link to={routes.MAIN}>Main</Link>\n              <Link to={routes.PROFILE}>Profile</Link>\n            </nav>\n          )}\n          <Switch>\n            <CustomRouteDefault\n              path={routes.LOGIN}\n              render={(props) => (\n                <LoginForm {...props} setIsChecked={setIsChecked} />\n              )}\n            />\n            <CustomRoute path={routes.MAIN} component={Main} />\n            <CustomRoute path={routes.PROFILE} component={UserProfile} />\n\n            <Route path={routes.NOT_FOUND} component={NotFound} />\n            <Redirect from=\"/\" exact to={routes.LOGIN} />\n            <Redirect to={routes.NOT_FOUND} />\n          </Switch>\n        </BrowserRouter>\n      </Provider>\n    </div>\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}